<div class="grid grid-cols-1 gap-4 border-b border-t bg-white-main/50 pb-2 pl-2 pr-2 pt-2 dark:bg-dark-main lg:pb-20 lg:pl-24 lg:pr-24 lg:pt-20 lg:grid-cols-2">
    <h1 class="w-full text-center text-5xl text-black dark:text-white lg:w-4/6 lg:text-left">@DataContext.Title</h1>
    <div class="flex flex-col">
        <h2 class="text-center text-lg font-bold lg:text-left">@DataContext.CurrentFeedback.Author</h2>
        <h3 class="pt-2">@DataContext.CurrentFeedback.Main</h3>
        <h4 class="pt-8 lg:pt-4">@DataContext.CurrentFeedback.Details</h4>
        <a class="main-action justify-center py-2 dark:text-yellow-400">
            <span class="animate-ping duration-700">>>></span>
        </a>
    </div>
</div>

@code {


    [Parameter]
    public FeedbackComponentModel DataContext { get; set; }

    private int _currentCount = 0;
    private Timer _timer;

    protected override void OnInitialized()
    {
        DataContext.CurrentFeedback = DataContext.FeedbackItems.First();

        _timer = new Timer(7000);
        _timer.Elapsed += OnTimedEvent;
        _timer.AutoReset = true;
        _timer.Start();
    }

    private void OnTimedEvent(object? sender, ElapsedEventArgs e)
    {
        _currentCount++;
        if (_currentCount >= DataContext.FeedbackItems.Count)
        {
            _currentCount = 0;
        }

        DataContext.CurrentFeedback = DataContext.FeedbackItems.ElementAt(_currentCount);
        StateHasChanged();
    }

}