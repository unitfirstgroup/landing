@using System.Collections.ObjectModel

<div class="relative">
    @*     <div class="block flex h-10 w-full items-center rounded rounded-lg border border border-gray-200 border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-rose-500 dark:focus:border-rose-500">
        <input value=@Selection name="select" id="select" disabled class="w-full rounded-lg bg-gray-50 text-sm text-gray-900 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" checked />

        <button class="cursor-pointer text-gray-300 outline-none transition-all hover:text-gray-600 focus:outline-none">
            <svg class="mx-2 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
        <label for="show_more" class="cursor-pointer border-l border-gray-200 text-gray-300 outline-none transition-all hover:text-gray-600 focus:outline-none">
            <svg class="mx-2 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
        </label>
    </div>

    <input type="checkbox" name="show_more" id="show_more" class="peer hidden" /> 
    <div class="@Visibility absolute mt-1 block w-full w-full flex-col rounded rounded-lg border border border-gray-200 border-gray-300 bg-white bg-gray-50 p-2.5 text-sm text-gray-900 shadow focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white peer-checked:flex dark:focus:ring-rose-500 dark:focus:border-rose-500">
        @foreach (var value in Values)
        {
            <div class="group cursor-pointer border-t">
                <a @key="value" @onclick="() => OnSelectItem(value)"
                   class=" border-l-4 block border-transparent border-rose-600 p-2 group-hover:border-rose-600 group-hover:bg-gray-100">@value</a>
            </div>
        }
    </div> *@
    
    <select class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
        
        @foreach (var value in Values)
        {
            <option value="@value">@value</option>
        }
    </select>
</div>

@code
{
    [Parameter] public ObservableCollection<string> Values { get; set; }

    [Parameter] public string Selection { get; set; }

    [Parameter]
    public string Visibility { get; set; } = "hidden";

    private void OnSelectItem(string value)
    {
        Selection = Values.FirstOrDefault(x => x == value);
        Visibility = Visibility == "hidden" ? null : "hidden";
    }
}
