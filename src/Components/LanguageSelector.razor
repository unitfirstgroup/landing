@inject IJSRuntime JSRuntime
@inject NavigationManager Nav

<div class="flex flex-row @Dark bg-white text-black dark:bg-gray-900 dark:text-white">

    <select class="flex flex-row @Dark bg-white text-black dark:bg-gray-900 dark:text-white" @bind="Culture">

        @foreach (var language in supportedLanguages)
        {
            <option class="flex flex-row @Dark bg-white text-black dark:bg-gray-900 dark:text-white" value="@language">@language.DisplayName</option>
        }

    </select>

</div>

@code
{
    [Parameter] public string Dark { get; set; }

    readonly CultureInfo[] supportedLanguages =
    {
        new CultureInfo("en-US"),
        new CultureInfo("ru-RU"),
        new CultureInfo("sp-SP")
    };

    CultureInfo Culture
    {
        get => CultureInfo.CurrentCulture;
        set
        {
            if (CultureInfo.CurrentCulture == value) 
                return;

            var js = (IJSInProcessRuntime)JSRuntime;
            js.InvokeVoid("appCulture.set", value.Name);
            Nav.NavigateTo(Nav.Uri, true);
        }
    }
}